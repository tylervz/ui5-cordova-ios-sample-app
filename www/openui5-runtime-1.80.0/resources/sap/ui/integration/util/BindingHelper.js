/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/base/BindingParser","sap/base/util/extend","sap/ui/integration/formatters/DateTimeFormatter","sap/ui/integration/formatters/NumberFormatter","sap/ui/integration/bindingFeatures/DateRange"],function(B,e,D,N,a){"use strict";var r=/\{\{([^}]+)\}\}/g;var b={};var f={date:D.date,dateTime:D.dateTime,currency:N.currency,"float":N.float,integer:N.integer,percent:N.percent,unit:N.unit};b.mLocals={"format":f,"dateRange":a};b.extractBindingInfo=function(v){v=b.escapeCardPlaceholders(v);return B.complexParser(v,undefined,true,undefined,undefined,undefined,b.mLocals);};b.createBindingInfos=function(i){if(!i){return i;}if(Array.isArray(i)){return i.map(b.createBindingInfos);}if(typeof i==="object"){var I={};for(var k in i){I[k]=b.createBindingInfos(i[k]);}return I;}return b.extractBindingInfo(i)||i;};b.formattedProperty=function(v,F){var c={};if(Array.isArray(v)){c.parts=v.map(function(I){return typeof I==="object"?e({},I):{value:I};});c.formatter=F;}else if(typeof v==="object"){c=e({},v);if(v.formatter){var i=c.formatter;c.formatter=function(){var I=i.apply(this,arguments);return F(I);};}else{c.formatter=F;}}else{c=F(v);}return c;};b.escapeCardPlaceholders=function(v){if(typeof v!=="string"){return v;}return v.replace(r,"\\{\\{$1\\}\\}");};b.addNamespace=function(n,v){b.mLocals[n]=v;};b.isAbsolutePath=function(p){return p.startsWith("/");};b.prependRelativePaths=function(v,p){if(typeof v!=="object"){return v;}var o=e({},v);if(o.path&&!this.isAbsolutePath(o.path)){o.path=p+"/"+o.path;}if(o.parts){o.parts=o.parts.map(function(c){return b.prependRelativePaths(c,p);});}return o;};return b;});
