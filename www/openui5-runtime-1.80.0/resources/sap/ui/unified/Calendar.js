/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/core/Control','sap/ui/core/LocaleData','sap/ui/unified/calendar/CalendarUtils','sap/ui/unified/DateRange','./calendar/Header','./calendar/Month','./calendar/MonthPicker','./calendar/YearPicker','./calendar/YearRangePicker','./calendar/CalendarDate',"sap/ui/core/date/UniversalDate",'./library','sap/ui/Device','sap/ui/core/format/DateFormat','sap/ui/core/ResizeHandler','sap/ui/core/Locale','sap/ui/events/KeyCodes',"./CalendarRenderer","sap/ui/dom/containsOrEquals","sap/base/util/deepEqual","sap/base/Log","sap/ui/thirdparty/jquery"],function(C,L,a,D,H,M,b,Y,c,d,U,l,e,f,R,g,K,h,j,k,m,q){"use strict";var o=sap.ui.getCore(),n=sap.ui.core.CalendarType;var p=C.extend("sap.ui.unified.Calendar",{metadata:{library:"sap.ui.unified",designtime:"sap/ui/unified/designtime/Calendar.designtime",properties:{intervalSelection:{type:"boolean",group:"Behavior",defaultValue:false},singleSelection:{type:"boolean",group:"Behavior",defaultValue:true},months:{type:"int",group:"Appearance",defaultValue:1},firstDayOfWeek:{type:"int",group:"Appearance",defaultValue:-1},nonWorkingDays:{type:"int[]",group:"Appearance",defaultValue:null},primaryCalendarType:{type:"sap.ui.core.CalendarType",group:"Appearance",defaultValue:null},secondaryCalendarType:{type:"sap.ui.core.CalendarType",group:"Appearance",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},minDate:{type:"object",group:"Misc",defaultValue:null},maxDate:{type:"object",group:"Misc",defaultValue:null},showWeekNumbers:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{selectedDates:{type:"sap.ui.unified.DateRange",multiple:true,singularName:"selectedDate"},specialDates:{type:"sap.ui.unified.DateTypeRange",multiple:true,singularName:"specialDate"},disabledDates:{type:"sap.ui.unified.DateRange",multiple:true,singularName:"disabledDate"},header:{type:"sap.ui.unified.calendar.Header",multiple:false,visibility:"hidden"},secondMonthHeader:{type:"sap.ui.unified.calendar.Header",multiple:false,visibility:"hidden"},month:{type:"sap.ui.unified.calendar.Month",multiple:true,visibility:"hidden"},monthPicker:{type:"sap.ui.unified.calendar.MonthPicker",multiple:false,visibility:"hidden"},yearPicker:{type:"sap.ui.unified.calendar.YearPicker",multiple:false,visibility:"hidden"},yearRangePicker:{type:"sap.ui.unified.calendar.YearPicker",multiple:false,visibility:"hidden"}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"},legend:{type:"sap.ui.unified.CalendarLegend",multiple:false}},events:{select:{},cancel:{},startDateChange:{},weekNumberSelect:{allowPreventDefault:true,parameters:{weekNumber:{type:"int"},weekDays:{type:"sap.ui.unified.DateRange"}}}}}});p.prototype.init=function(){this._iBreakPointTablet=e.media._predefinedRangeSets[e.media.RANGESETS.SAP_STANDARD_EXTENDED].points[0];this._iBreakPointDesktop=e.media._predefinedRangeSets[e.media.RANGESETS.SAP_STANDARD_EXTENDED].points[1];this._iBreakPointLargeDesktop=e.media._predefinedRangeSets[e.media.RANGESETS.SAP_STANDARD_EXTENDED].points[2];var i=sap.ui.getCore().getConfiguration().getCalendarType();this.setProperty("primaryCalendarType",i);this.setProperty("secondaryCalendarType",i);this._iMode=0;this._iColumns=1;this._oYearFormat=f.getDateInstance({format:"y",calendarType:i});this.data("sap-ui-fastnavgroup","true",true);this._oMinDate=a._minDate(this.getPrimaryCalendarType());this._oMaxDate=a._maxDate(this.getPrimaryCalendarType());this._initializeHeader();this._initializeSecondMonthHeader();var E=this._createMonth(this.getId()+"--Month0");E.attachEvent("focus",this._handleFocus,this);E.attachEvent("select",x,this);E.attachEvent("_renderMonth",w,this);E.attachEvent("_bindMousemove",y,this);E.attachEvent("_unbindMousemove",z,this);E._bNoThemeChange=true;this.addAggregation("month",E);this._initilizeMonthPicker();this._initilizeYearPicker();this._initilizeYearRangePicker();this._resizeProxy=r.bind(this);this._oSelectedMonth;this._bSkipCancelButtonRendering=false;this._bActionTriggeredFromSecondHeader=false;};p.prototype.exit=function(){if(this._sInvalidateMonth){clearTimeout(this._sInvalidateMonth);}if(this._afterHeaderRenderAdjustCSS){this.removeDelegate(this._afterHeaderRenderAdjustCSS);this._afterHeaderRenderAdjustCSS=null;}if(this._afterSecondHeaderRenderAdjustCSS){this.removeDelegate(this._afterSecondHeaderRenderAdjustCSS);this._afterSecondHeaderRenderAdjustCSS=null;}if(this._sResizeListener){R.deregister(this._sResizeListener);this._sResizeListener=undefined;}this._oSelectedMonth=null;};p.prototype._initializeHeader=function(){var i=new H(this.getId()+"--Head");i.attachEvent("pressPrevious",this._handlePrevious,this);i.attachEvent("pressNext",this._handleNext,this);i.attachEvent("pressButton1",this._handleButton1,this);i.attachEvent("pressButton2",this._handleButton2,this);i.attachEvent("pressButton3",this._handleButton1,this);i.attachEvent("pressButton4",this._handleButton2,this);this._afterHeaderRenderAdjustCSS=this._createOnAfterRenderingDelegate(i);i.addDelegate(this._afterHeaderRenderAdjustCSS);this.setAggregation("header",i);};p.prototype._createOnAfterRenderingDelegate=function(i){return{onAfterRendering:function(){if(i.getVisible()&&!i.getVisibleButton1()){i.$().find(".sapUiCalHeadB2").addClass("sapUiCalSingleYearButton");}if(i.getVisible()&&!i._getVisibleButton3()){this._isTwoMonthsInTwoColumns()&&i.$().find(".sapUiCalHeadB4").addClass("sapUiCalSingleYearButton");}}.bind(this)};};p.prototype._initializeSecondMonthHeader=function(){var S=new H(this.getId()+"--SecondMonthHead",{visible:false});S.addStyleClass("sapUiCalHeadSecondMonth");S.attachEvent("pressPrevious",this._handlePrevious,this);S.attachEvent("pressNext",this._handleNext,this);S.attachEvent("pressButton1",this._handleButton1,this);S.attachEvent("pressButton2",this._handleButton2,this);this._afterSecondHeaderRenderAdjustCSS=this._createOnAfterRenderingDelegate(S);S.addDelegate(this._afterSecondHeaderRenderAdjustCSS);this.setAggregation("secondMonthHeader",S);};p.prototype._initilizeMonthPicker=function(){var i=new b(this.getId()+"--MP");i._bCalendar=true;i.attachEvent("select",this._selectMonth,this);i.attachEvent("pageChange",A,this);i._bNoThemeChange=true;this.setAggregation("monthPicker",i);i._setSelectedDatesControlOrigin(this);};p.prototype._initilizeYearPicker=function(){var i=new Y(this.getId()+"--YP");i._bCalendar=true;i.attachEvent("select",this._selectYear,this);i.attachEvent("pageChange",B,this);this.setAggregation("yearPicker",i);i._setSelectedDatesControlOrigin(this);};p.prototype._initilizeYearRangePicker=function(){var i=new c(this.getId()+"--YRP");i.attachEvent("select",this._selectYearRange,this);i.setPrimaryCalendarType(this.getPrimaryCalendarType());this.setAggregation("yearRangePicker",i);};p.prototype._createMonth=function(i){var E=new M(i,{width:"100%"});E._bCalendar=true;E.attachEvent("datehovered",this._handleDateHovered,this);E.attachEvent("weekNumberSelect",this._handleWeekNumberSelect,this);return E;};p.prototype._handleWeekNumberSelect=function(E){var i=this.fireWeekNumberSelect({weekNumber:E.getParameter("weekNumber"),weekDays:E.getParameter("weekDays")});if(!i){E.preventDefault();}return this;};p.prototype._handleDateHovered=function(E){var F=this.getAggregation("month"),G=E.getParameter("date1"),I=E.getParameter("date2"),i;for(i=0;i<F.length;i++){F[i]._markDatesBetweenStartAndHoveredDate(G,I);}};p.prototype.onBeforeRendering=function(){var E=this.getAggregation("month"),F,G=E[0].getDate(),I=this._getFocusedDate(),J=this.getAggregation("header");if(E.length>1&&G){F=d.fromLocalJSDate(G,this.getPrimaryCalendarType());}else if(E.length>1){F=s.call(this,this._getFocusedDate());}else{F=I;}for(var i=0;i<E.length;i++){G=new d(F);if(i>0){G.setMonth(G.getMonth()+i,1);}var N=G;if(I.getYear()===G.getYear()&&I.getMonth()===G.getMonth()){N=I;}E[i].displayDate(N.toLocalJSDate());E[i].setShowWeekNumbers(this.getShowWeekNumbers());}this._updateHeader(F);this._iSize=0;if(!this._getSucessorsPickerPopup()){J.setVisibleButton1(true);J.setVisibleButton2(true);}};p.prototype.onAfterRendering=function(E){if(!this._getSucessorsPickerPopup()){t.call(this);}if(v.call(this)>1||this._bInitMonth){E.size={width:this.getDomRef().offsetWidth};r.call(this,E,true);if(!this._sResizeListener){this._sResizeListener=R.register(this,this._resizeProxy);}this._bInitMonth=undefined;}};p.prototype.invalidate=function(O){if(!this._bDateRangeChanged&&(!O||!(O instanceof D))){C.prototype.invalidate.apply(this,arguments);}else if(this.getDomRef()&&this._iMode==0&&!this._sInvalidateMonth){this._sInvalidateMonth=setTimeout(this._invalidateMonth.bind(this,O),0);}};p.prototype.removeSelectedDate=function(S){this._bDateRangeChanged=true;return this.removeAggregation("selectedDates",S);};p.prototype.removeAllSelectedDates=function(){this._bDateRangeChanged=true;var i=this.removeAllAggregation("selectedDates");return i;};p.prototype.destroySelectedDates=function(){this._bDateRangeChanged=true;var i=this.destroyAggregation("selectedDates");return i;};p.prototype.removeAllSpecialDates=function(){this._bDateRangeChanged=true;var i=this.removeAllAggregation("specialDates");return i;};p.prototype.destroySpecialDates=function(){this._bDateRangeChanged=true;var i=this.destroyAggregation("specialDates");return i;};p.prototype._setSpecialDatesControlOrigin=function(i){this._oSpecialDatesControlOrigin=i;};p.prototype.getSpecialDates=function(){var P=this.getParent();if(this._oSpecialDatesControlOrigin){return this._oSpecialDatesControlOrigin.getSpecialDates();}if(P&&P.getSpecialDates){return P.getSpecialDates();}else{return this.getAggregation("specialDates",[]);}};p.prototype.removeAllDisabledDates=function(){this._bDateRangeChanged=true;var i=this.removeAllAggregation("disabledDates");return i;};p.prototype.destroyDisabledDates=function(){this._bDateRangeChanged=true;var i=this.destroyAggregation("disabledDates");return i;};p.prototype.setLocale=function(i){if(this._sLocale!=i){this._sLocale=i;this._oLocaleData=undefined;this.invalidate();this._toggleTwoMonthsInTwoColumnsCSS();}return this;};p.prototype.getLocale=function(){if(!this._sLocale){this._sLocale=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale().toString();}return this._sLocale;};p.prototype._getFocusedDate=function(){if(!this._oFocusedDate){_.call(this);}return this._oFocusedDate;};p.prototype._setFocusedDate=function(i){a._checkCalendarDate(i);this._oFocusedDate=new d(i,this.getPrimaryCalendarType());};p.prototype.focusDate=function(i){u.call(this,i,false);return this;};p.prototype.displayDate=function(i){u.call(this,i,true);return this;};p.prototype.getStartDate=function(){var S;if(this.getDomRef()){var i=this.getAggregation("month");S=d.fromLocalJSDate(i[0].getDate(),this.getPrimaryCalendarType());}else{S=new d(this._getFocusedDate());}S.setDate(1);return S.toLocalJSDate();};p.prototype.setPopupMode=function(P){this._bPoupupMode=P;return this;};p.prototype.setMonths=function(E){this._bDateRangeChanged=undefined;this.setProperty("months",E,false);E=v.call(this);var F=this.getAggregation("month");var i=0;var G;if(F.length<E){for(i=F.length;i<E;i++){G=this._createMonth(this.getId()+"--Month"+i);G.attachEvent("focus",this._handleFocus,this);G.attachEvent("select",x,this);G.attachEvent("_renderMonth",w,this);G.attachEvent("_bindMousemove",y,this);G.attachEvent("_unbindMousemove",z,this);G._bNoThemeChange=true;this.addAggregation("month",G);}}else if(F.length>E){for(i=F.length;i>E;i--){G=this.removeAggregation("month",i-1);G.destroy();}if(E==1){this._bInitMonth=true;}}if(E>1&&F[0].getDate()){F[0].setProperty("date",null,true);}return this;};p.prototype.setPrimaryCalendarType=function(E){var F=this.getAggregation("month"),G,I,J,N,i;this.setProperty("primaryCalendarType",E);this._adjustYearRangeDisplay();this._oYearFormat=f.getDateInstance({format:"y",calendarType:E});if(this._oFocusedDate){this._oFocusedDate=new d(this._oFocusedDate,E);}this._oMinDate=new d(this._oMinDate,E);this._oMaxDate=new d(this._oMaxDate,E);for(i=0;i<F.length;i++){G=F[i];G.setPrimaryCalendarType(E);}if(!this._getSucessorsPickerPopup()){I=this._getMonthPicker();I.setPrimaryCalendarType(E);J=this._getYearPicker();J.setPrimaryCalendarType(E);N=this.getAggregation("yearRangePicker");N.setPrimaryCalendarType(E);}return this;};p.prototype.setSecondaryCalendarType=function(E){this._bSecondaryCalendarTypeSet=true;this.setProperty("secondaryCalendarType",E);this._oYearFormatSecondary=f.getDateInstance({format:"y",calendarType:E});var F=this.getAggregation("month");for(var i=0;i<F.length;i++){var G=F[i];G.setSecondaryCalendarType(E);}return this;};p.prototype._getSecondaryCalendarType=function(){var S;if(this._bSecondaryCalendarTypeSet){S=this.getSecondaryCalendarType();var P=this.getPrimaryCalendarType();if(S==P){S=undefined;}}return S;};p.prototype._getActiveHeaderAggregation=function(){if(this._bActionTriggeredFromSecondHeader&&this._isTwoMonthsInOneColumn()){return this.getAggregation("secondMonthHeader");}else{return this.getAggregation("header");}};p.prototype._setIsSecondHeaderButtonAction=function(E){if(E.getSource().sParentAggregationName==="secondMonthHeader"||E.sId==="pressButton3"||E.sId==="pressButton4"){this._bActionTriggeredFromSecondHeader=true;}else{this._bActionTriggeredFromSecondHeader=false;}};p.prototype.setMinDate=function(i){var P=this.getPrimaryCalendarType(),E;if(k(i,this.getMinDate())){return this;}if(!i){this._oMinDate=a._minDate(P);}else{a._checkJSDateObject(i);this._oMinDate=d.fromLocalJSDate(i,P);var F=this._oMinDate.getYear();a._checkYearInValidRange(F);if(this._oMaxDate.isBefore(this._oMinDate)){m.warning("minDate > maxDate -> maxDate set to end of the month",this);this._oMaxDate=d.fromLocalJSDate(i,P);this._oMaxDate.setDate(a._daysInMonth(this._oMaxDate));this.setProperty("maxDate",this._oMaxDate.toLocalJSDate(),true);}this._setMinMaxDateExtend(d.fromLocalJSDate(i,P));}this.setProperty("minDate",i,false);if(!this._getSucessorsPickerPopup()){E=this._oMinDate.getYear();this._getYearPicker()._oMinDate.setYear(E);this.getAggregation("yearRangePicker")._oMinDate.setYear(E);}return this;};p.prototype.setMaxDate=function(i){var P,E;if(k(i,this.getMaxDate())){return this;}if(!i){this._oMaxDate=a._maxDate(P);}else{a._checkJSDateObject(i);this._oMaxDate=d.fromLocalJSDate(i,P);var F=this._oMaxDate.getYear();a._checkYearInValidRange(F);if(this._oMinDate.isAfter(this._oMaxDate)){m.warning("maxDate < minDate -> minDate set to begin of the month",this);this._oMinDate=d.fromLocalJSDate(i,P);this._oMinDate.setDate(1);this.setProperty("minDate",this._oMinDate.toLocalJSDate(),true);}this._setMinMaxDateExtend(d.fromLocalJSDate(i,P));}this.setProperty("maxDate",i,false);if(!this._getSucessorsPickerPopup()){E=this._oMaxDate.getYear();this._getYearPicker()._oMaxDate.setYear(E);this.getAggregation("yearRangePicker")._oMaxDate.setYear(E);}return this;};p.prototype._setMinMaxDateExtend=function(i){if(this._oFocusedDate){if(a._isOutside(this._oFocusedDate,this._oMinDate,this._oMaxDate)){m.warning("focused date is not between [minDate - maxDate] -> refocus to the new max/min date: "+i.toString(),this);this.focusDate(i.toLocalJSDate());}}};p.prototype._getLocaleData=function(){if(!this._oLocaleData){var i=this.getLocale();var E=new g(i);this._oLocaleData=L.getInstance(E);}return this._oLocaleData;};p.prototype._getShowMonthHeader=function(){var i=v.call(this);if(i>2){return true;}else{return false;}};p.prototype._getMonthPicker=function(){return this.getAggregation("monthPicker");};p.prototype._getYearPicker=function(){return this.getAggregation("yearPicker");};p.prototype._getYearRangePicker=function(){return this.getAggregation("yearRangePicker");};p.prototype.onclick=function(E){var i=E.target;if(E.isMarked("delayedMouseEvent")){return;}if(i.id==this.getId()+"-cancel"){this.onsapescape(E);}};p.prototype.onmousedown=function(E){if(E.cancelable){E.preventDefault();}E.setMark("cancelAutoClose");};p.prototype.onsapescape=function(E){this.fireCancel();this._closedPickers();if(!this._getSucessorsPickerPopup()){this._updateHeadersButtons();this._setHeaderText(this._getFocusedDate());}};p.prototype.onsapshow=function(E){var i=E.which||E.keyCode;if(this._bPoupupMode&&i!==K.F4){this._closedPickers();this.fireCancel();E.preventDefault();}};p.prototype.onkeydown=function(E){var i=E.which||E.keyCode,S=E.shiftKey;if(i!==K.F4){return;}E.preventDefault();if(S){switch(this._iMode){case 0:case 1:this._showYearPicker();break;case 2:this._showYearRangePicker();break;default:}}else{this._showMonthPicker();}};p.prototype.onsaphide=p.prototype.onsapshow;p.prototype.onsaptabnext=function(E){var i=this.getAggregation("header");if(j(this.getDomRef("content"),E.target)){if(i.getVisibleButton1()){i.getDomRef("B1").focus();E.preventDefault();}else if(i.getVisibleButton2()){i.getDomRef("B2").focus();E.preventDefault();}else if(!this._bPoupupMode){this._clearTabindex0();}else{this._clearTabindex0();E.preventDefault();}}else if(E.target.id===i.getId()+"-B1"){i.getVisibleButton2()&&i.getDomRef("B2").focus();E.preventDefault();}else if(E.target.id===i.getId()+"-B2"){if(this._bPoupupMode){this._moveFocusToCalContent();E.preventDefault();}else{this._clearTabindex0();}}};p.prototype.onsaptabprevious=function(E){var i=this.getAggregation("header");if(j(this.getDomRef("content"),E.target)){if(this._bPoupupMode){if(i.getVisibleButton2()){i.getDomRef("B2").focus();}else{i.getVisibleButton1()&&i.getDomRef("B1").focus();}E.preventDefault();}else{this._clearTabindex0();}}else if(E.target.id===i.getId()+"-B1"){this._moveFocusToCalContent();E.preventDefault();}else if(E.target.id===i.getId()+"-B2"){if(i.getVisibleButton1()){i.getDomRef("B1").focus();}else{this._moveFocusToCalContent();}E.preventDefault();}};p.prototype._clearTabindex0=function(){var E=this.getAggregation("month"),F=this._getMonthPicker(),G=this.getAggregation("yearPicker"),I=this.getAggregation("yearRangePicker"),J,i;for(i=0;i<E.length;i++){J=E[i];q(J._oItemNavigation.getItemDomRefs()[J._oItemNavigation.getFocusedIndex()]).attr("tabindex","-1");}if(!this._getSucessorsPickerPopup()){if(F.getDomRef()){q(F._oItemNavigation.getItemDomRefs()[F._oItemNavigation.getFocusedIndex()]).attr("tabindex","-1");}if(G.getDomRef()){q(G._oItemNavigation.getItemDomRefs()[G._oItemNavigation.getFocusedIndex()]).attr("tabindex","-1");}if(I.getDomRef()){q(I._oItemNavigation.getItemDomRefs()[I._oItemNavigation.getFocusedIndex()]).attr("tabindex","-1");}}};p.prototype._moveFocusToCalContent=function(){var E=this.getAggregation("yearPicker"),F=this._getMonthPicker(),G=this.getAggregation("month"),I,J,N,i;switch(this._iMode){case 0:N=this._getFocusedDate();for(i=0;i<G.length;i++){I=G[i];J=d.fromLocalJSDate(I.getDate(),this.getPrimaryCalendarType());if(N.isSame(J)){I._oItemNavigation.focusItem(I._oItemNavigation.getFocusedIndex());}else{q(I._oItemNavigation.getItemDomRefs()[I._oItemNavigation.getFocusedIndex()]).attr("tabindex","0");}}break;case 1:if(!this._getSucessorsPickerPopup()){F._oItemNavigation.focusItem(F._oItemNavigation.getFocusedIndex());}break;case 2:if(!this._getSucessorsPickerPopup()){E._oItemNavigation.focusItem(E._oItemNavigation.getFocusedIndex());}break;}};p.prototype.onfocusin=function(E){if(E.target.id==this.getId()+"-end"){this._focusOnShiftTab();if(!this._bPoupupMode){this._clearTabindex0();}}this.$("end").attr("tabindex","-1");};p.prototype._focusOnShiftTab=function(){var i=this.getAggregation("header"),E=i.getDomRef("B2");if(E){E.focus();}else{this.focus();}};p.prototype.onsapfocusleave=function(E){var F,G,I,J;if(!E.relatedControlId||!j(this.getDomRef(),sap.ui.getCore().byId(E.relatedControlId).getFocusDomRef())){this.$("end").attr("tabindex","0");if(!this._bPoupupMode){F=this.getAggregation("month");switch(this._iMode){case 0:for(var i=0;i<F.length;i++){G=F[i];q(G._oItemNavigation.getItemDomRefs()[G._oItemNavigation.getFocusedIndex()]).attr("tabindex","0");}break;case 1:if(!this._getSucessorsPickerPopup()){I=this._getMonthPicker();q(I._oItemNavigation.getItemDomRefs()[I._oItemNavigation.getFocusedIndex()]).attr("tabindex","0");}break;case 2:if(!this._getSucessorsPickerPopup()){J=this._getYearPicker();q(J._oItemNavigation.getItemDomRefs()[J._oItemNavigation.getFocusedIndex()]).attr("tabindex","0");}break;}}}};p.prototype.getFocusDomRef=function(){var i=this._oSelectedMonth?this._oSelectedMonth:this.getAggregation("month")[0],E=this._getMonthPicker(),F=this._getYearPicker(),G=this._getYearRangePicker();switch(this._iMode){case 0:return i.getFocusDomRef();case 1:return E.getFocusDomRef();case 2:return F.getFocusDomRef();case 3:return G.getFocusDomRef();default:return;}};p.prototype.onThemeChanged=function(){var E;if(!this.getDomRef()){return;}this._bNamesLengthChecked=undefined;if(!this._getSucessorsPickerPopup()){E=this._getMonthPicker();this._showMonthPicker(true);E._bNoThemeChange=false;E.onThemeChanged(arguments);E._bNoThemeChange=true;this._bLongMonth=E._bLongMonth;this._hideMonthPicker(true);}var F=this.getAggregation("month");for(var i=0;i<F.length;i++){var G=F[i];G._bNoThemeChange=false;G.onThemeChanged(arguments);G._bNoThemeChange=true;}var I;if(F.length>1){I=d.fromLocalJSDate(F[0].getDate(),this.getPrimaryCalendarType());}else{I=this._getFocusedDate();}this._setHeaderText(I);this._updateHeadersButtons();this._setPrimaryHeaderMonthButtonText();this._toggleTwoMonthsInTwoColumnsCSS();if(!this._getSucessorsPickerPopup()){t.call(this);}};p.prototype._updateHeader=function(i){this._setHeaderText(i);this._togglePrevNext(i,true);};p.prototype._togglePrevNext=function(i,E){var F=this._oMaxDate.getYear();var G=this._oMinDate.getYear();var I=this._oMaxDate.getMonth();var J=this._oMinDate.getMonth();var N=this.getAggregation("header");var O=v.call(this);var P=new d(i,this.getPrimaryCalendarType());if(this._iMode==0&&O>1){P=s.call(this,i);P.setMonth(P.getMonth()+O-1);P.setDate(a._daysInMonth(P));}else{P.setDate(a._daysInMonth(P));}var Q=P.getYear();var S=P.getMonth();if(Q>F||(Q==F&&(!E||S>=I))||(this._iMode==1&&this._getSucessorsPickerPopup())){N.setEnabledNext(false);}else{N.setEnabledNext(true);}if(this._iMode==0&&O>1){P.setMonth(P.getMonth()-O+1,1);}else{P.setDate(1);}Q=P.getYear();S=P.getMonth();if(Q<G||(Q==G&&(!E||S<=J))||(this._iMode==1&&this._getSucessorsPickerPopup())){N.setEnabledPrevious(false);}else{N.setEnabledPrevious(true);}};p.prototype._togglePrevNexYearPicker=function(){var i=this.getAggregation("yearRangePicker"),E=this._getYearPicker(),P=this.getPrimaryCalendarType(),F=new d(this._oMinDate,P),G=new d(this._oMaxDate,P),I=this.getAggregation("header"),J=1,N,O;if(i.getDomRef()&&i.getDomRef().style.display===""){O=i.getYears();N=d.fromLocalJSDate(i.getFirstRenderedDate());J=i.getRangeSize();}else{O=E.getYears();N=d.fromLocalJSDate(E.getFirstRenderedDate());}N.setYear(N.getYear()+Math.floor(O/2)*J);G.setYear(G.getYear()-Math.ceil(O/2)*J);G.setMonth(11,31);F.setYear(F.getYear()+Math.floor(O/2)*J+1);F.setMonth(0,1);I.setEnabledNext(N.isSameOrBefore(G));I.setEnabledPrevious(N.isSameOrAfter(F));};p.prototype._handlePrevious=function(E){var F=this._getFocusedDate(),i=v.call(this),G,I,S=false;switch(this._iMode){case 0:if(i>1){G=d.fromLocalJSDate(this.getAggregation("month")[0].getDate(),this.getPrimaryCalendarType());G.setDate(1);this._setFocusedDate(G);F=this._getFocusedDate();}else{F.setDate(1);}F.setDate(F.getDate()-1);this._renderMonth(S,true);break;case 1:F.setYear(F.getYear()-1);this._updateHeadersYearPrimaryText(this._oYearFormat.format(F.toUTCJSDate(),true));var J=this._getSecondaryCalendarType();if(J){I=new d(F,J);I.setMonth(0,1);this._updateHeadersYearAdditionalText(this._oYearFormatSecondary.format(I.toUTCJSDate(),true));}else{this._updateHeadersYearAdditionalText();}this._togglePrevNext(F);this._setDisabledMonths(F.getYear());this._getMonthPicker()._setYear(F.getYear());this._renderPicker(this._getMonthPicker());break;case 2:this._getYearPicker().previousPage();this._togglePrevNexYearPicker();this._updateHeadersYearPrimaryText(this._getYearString());break;case 3:this.getAggregation("yearRangePicker").previousPage();this._togglePrevNexYearPicker();this._updateHeadersYearPrimaryText(this._getYearString());break;}};p.prototype._handleNext=function(E){var F=this._getFocusedDate(),i=v.call(this),G,I;switch(this._iMode){case 0:if(i>1){G=d.fromLocalJSDate(this.getAggregation("month")[0].getDate(),this.getPrimaryCalendarType());G.setMonth(G.getMonth(),1);this._setFocusedDate(G);F=this._getFocusedDate();}F.setMonth(F.getMonth()+1,1);this._renderMonth();break;case 1:F.setYear(F.getYear()+1);this._updateHeadersYearPrimaryText(this._oYearFormat.format(F.toUTCJSDate(),true));var S=this._getSecondaryCalendarType();if(S){I=new d(F,S);I.setMonth(0,1);this._updateHeadersYearAdditionalText(this._oYearFormatSecondary.format(I.toUTCJSDate(),true));}else{this._updateHeadersYearAdditionalText();}this._togglePrevNext(F);this._setDisabledMonths(F.getYear());this._getMonthPicker()._setYear(F.getYear());this._renderPicker(this._getMonthPicker());break;case 2:this._getYearPicker().nextPage();this._togglePrevNexYearPicker();this._updateHeadersYearPrimaryText(this._getYearString());break;case 3:this.getAggregation("yearRangePicker").nextPage();this._togglePrevNexYearPicker();this._updateHeadersYearPrimaryText(this._getYearString());break;}};p.prototype._getYearString=function(){var i=this._getYearPicker(),E=i.getDomRef(),F=this._getFocusedDate(),G,I;if(i&&E&&E.style.display===""){G=Math.floor(i.getYears()/2);I=i._oItemNavigation.getItemDomRefs()[G].getAttribute("data-sap-year-start");F=d.fromLocalJSDate(i._oFormatYyyymmdd.parse(I),this.getPrimaryCalendarType());F.setDate(1);}return this._oYearFormat.format(U.getInstance(F.toUTCJSDate(),F.getCalendarType()),true);};p.prototype._getDisplayedMonths=function(E){var F=[];var G=E.getMonth();var I=v.call(this);if(I>1){for(var i=0;i<I;i++){F.push((G+i)%12);}}else{F.push(G);}return F;};p.prototype._getDisplayedSecondaryMonths=function(P,S){var i=this.getAggregation("month");var F=d.fromLocalJSDate(i[0].getDate(),P);F.setDate(1);F=new d(F,S);var E=F.getMonth();var G=d.fromLocalJSDate(i[i.length-1].getDate(),P);G.setDate(a._daysInMonth(G));G=new d(G,S);var I=G.getMonth();return{start:E,end:I};};p.prototype._closedPickers=function(){switch(this._iMode){case 0:break;case 1:this._hideMonthPicker();break;case 2:this._hideYearPicker();break;case 3:this._hideYearRangePicker();break;}};p.prototype._setDisabledMonths=function(i,E){var F=0;var G=11;if(i==this._oMinDate.getYear()){F=this._oMinDate.getMonth();}if(i==this._oMaxDate.getYear()){G=this._oMaxDate.getMonth();}if(!E){E=this._getMonthPicker();}E.setMinMax(F,G);};p.prototype._handleFocus=function(E){var i=d.fromLocalJSDate(E.getParameter("date"),this.getPrimaryCalendarType());var O=E.getParameter("otherMonth");var F=E.getParameter("restoreOldDate");if(F){if(!k(this._getFocusedDate(),i)){this._renderMonth(false,false,true);}}else{this._focusDate(i,O);}};p.prototype._getVisibleDays=function(){var i=this.getAggregation("month")[0];return i._getVisibleDays(i._getDate(),false);};p.prototype._renderMonth=function(S,I,N){var E=this._getFocusedDate(),F=this.getAggregation("month"),G=false,J,O,P,i=0;for(i=0;i<F.length;i++){J=F[i];if(J.checkDateFocusable(E.toLocalJSDate())&&F[0].getDate()&&E.getMonth()===F[0].getDate().getMonth()){G=true;}if(G||F.length==1){if(!S){J.setDate(E.toLocalJSDate());}else{J.displayDate(E.toLocalJSDate());}break;}}if(!G){P=new d(E,this.getPrimaryCalendarType());if(F.length>1){P=s.call(this,P);for(i=0;i<F.length;i++){J=F[i];O=new d(P,this.getPrimaryCalendarType());O.setMonth(P.getMonth()+i);if(!S&&a._isSameMonthAndYear(O,E)){J.setDate(E.toLocalJSDate());}else{J.displayDate(O.toLocalJSDate());}}}this._updateHeader(P);this._updateHeadersButtons();this._setPrimaryHeaderMonthButtonText();this._toggleTwoMonthsInTwoColumnsCSS();if(!N){this.fireStartDateChange();}}};p.prototype._showMonthPicker=function(S){var i=this._getFocusedDate(),E=this._getMonthPicker(),F=new d(this._getFocusedDate());this._iMode===2&&this._hideYearPicker(true);this._updateMonthButtonVisibility();this._renderPicker(E);if(this._bActionTriggeredFromSecondHeader){F.setDate(1);F.setMonth(F.getMonth()+1);E._setYear(F.getYear());}else{E._setYear(i.getYear());}this._showOverlay();if(!S&&this._bActionTriggeredFromSecondHeader){E.setMonth(F.getMonth());this._setDisabledMonths(F.getYear(),E);}else if(!S){E.setMonth(i.getMonth());this._setDisabledMonths(i.getYear(),E);}this._iMode=1;this._togglePrevNext(i,false);this._setHeaderText(this._getFocusedDate());};p.prototype._renderPicker=function(P){var i=sap.ui.getCore().createRenderManager(),$=this.$("content");if($[0]){i.renderControl(P);i.flush($[0],false,true);i.destroy();}};p.prototype._hideMonthPicker=function(S){var E=this._getMonthPicker();this._iMode=0;E.$().css("display","none");this._hideOverlay();if(!S){this._renderMonth();if(v.call(this)>1){var F=this.getAggregation("month");for(var i=0;i<F.length;i++){var G=F[i];q(G._oItemNavigation.getItemDomRefs()[G._oItemNavigation.getFocusedIndex()]).attr("tabindex","0");}}}this._updateHeadersButtons();this._togglePrevNext(this._getFocusedDate(),true);this._bActionTriggeredFromSecondHeader=false;};p.prototype._showYearPicker=function(){var i=this._getFocusedDate(),E=this._getYearPicker(),F,G;this._iMode===1&&this._hideMonthPicker(true);E.getDomRef()?E.$().css("display",""):this._renderPicker(E);this._showOverlay();E.setDate(i.toLocalJSDate());if(v.call(this)==1){F=this.getAggregation("month")[0];G=F.$("days").find(".sapUiCalItem");if(G.length==28){E.$().addClass("sapUiCalYearNoTop");}else{E.$().removeClass("sapUiCalYearNoTop");}}this._togglePrevNexYearPicker();this._iMode=2;if(this._isTwoMonthsInOneColumn()){this._updateActiveHeaderYearButtonVisibility();}else{this._updateHeadersButtons();}if(this._bActionTriggeredFromSecondHeader&&this.getAggregation("month")[1].getDate().getFullYear()>this._getFocusedDate().getYear()){var S=i.toLocalJSDate();S.setFullYear(S.getFullYear()+1);E.setDate(S);this._updateHeadersYearPrimaryText(this._getYearString());}else{E.setDate(i.toLocalJSDate());this._updateHeadersYearPrimaryText(this._getYearString());}};p.prototype._hideYearPicker=function(S){this._iMode=0;var E=this._getYearPicker();E.$().css("display","none");this._hideOverlay();if(!S){this._renderMonth();if(v.call(this)>1){var F=this.getAggregation("month");for(var i=0;i<F.length;i++){var G=F[i];q(G._oItemNavigation.getItemDomRefs()[G._oItemNavigation.getFocusedIndex()]).attr("tabindex","0");}}}this._updateActiveHeaderYearButtonVisibility();this._togglePrevNext(this._getFocusedDate(),true);this._bActionTriggeredFromSecondHeader=false;};p.prototype._focusDate=function(i,O,N){var F;var E=false;var G=false;if(i.isBefore(this._oMinDate)){F=this._oMinDate;E=true;}else if(i.isAfter(this._oMaxDate)){F=this._oMaxDate;E=true;}else{F=i;}if(this._focusDateExtend){G=this._focusDateExtend(i,O,N);}var I=F.isBefore(this._getFocusedDate());this._setFocusedDate(F);if(E||O){this._renderMonth(false,I,N);}if(G){this.fireStartDateChange();}};p.prototype._invalidateMonth=function(O){this._sInvalidateMonth=undefined;var E=this.getAggregation("month");if(E){for(var i=0;i<E.length;i++){var F=E[i];F._bDateRangeChanged=true;F._bInvalidateSync=true;F._bNoFocus=true;F.invalidate(O);F._bInvalidateSync=undefined;}}this._bDateRangeChanged=undefined;};p.prototype._setHeaderText=function(i){var E=this.getAggregation("header");var S=this.getAggregation("secondMonthHeader");var F=this._getLocaleData();var G=[];var I=[];var J=[];var N=[];var O;var P=false;var Q;var T;var V;var W;var X;var Z=this.getPrimaryCalendarType();var $=this._getSecondaryCalendarType();var a1="";if(this._bLongMonth||!this._bNamesLengthChecked){G=F.getMonthsStandAlone("wide",Z);}else{P=true;G=F.getMonthsStandAlone("abbreviated",Z);I=F.getMonthsStandAlone("wide",Z);}if($){J=F.getMonthsStandAlone("abbreviated",$);N=F.getMonthsStandAlone("wide",$);var b1=this._getDisplayedSecondaryMonths(Z,$);if(b1.start==b1.end){V=J[b1.start];a1=N[b1.start];}else{X=F.getIntervalPattern();V=X.replace(/\{0\}/,J[b1.start]).replace(/\{1\}/,J[b1.end]);a1=X.replace(/\{0\}/,N[b1.start]).replace(/\{1\}/,N[b1.end]);}}E.setAdditionalTextButton1(V);E._setAdditionalTextButton3(V);S.setAdditionalTextButton1(V);var c1=this._getDisplayedMonths(i);this._sFirstMonthName=Q=G[c1[0]];T=G[c1[c1.length-1]];if(c1.length>1&&!this._bShowOneMonth){if(!X){X=F.getIntervalPattern();}V=X.replace(/\{0\}/,Q).replace(/\{1\}/,T);O=I.length?X.replace(/\{0\}/,I[c1[0]]).replace(/\{1\}/,I[c1[c1.length-1]]):V;if(this._isTwoMonthsInTwoColumns()||this._isTwoMonthsInOneColumn()){V=Q;}}else{V=Q;O=I[c1[0]]||V;}if(!this._getSucessorsPickerPopup()&&a1){O+=", "+a1;}E.setTextButton1(V);E.setAriaLabelButton1(O);E._setTextButton3(T);E._setAriaLabelButton3(T);S.setTextButton1(T);S.setAriaLabelButton1(T);var d1=new d(i,Z);d1.setDate(1);W=this._oYearFormat.format(d1.toUTCJSDate(),true);if(d1.getMonth()===11){this._updateHeadersYearPrimaryText(W,(parseInt(W)+1).toString());}else{this._updateHeadersYearPrimaryText(W,W);}if($){d1=new d(d1,$);this._updateHeadersYearAdditionalText(this._oYearFormatSecondary.format(d1.toUTCJSDate(),true));}else{this._updateHeadersYearAdditionalText();}return{sMonth:V,sYear:W,sAriaLabel:O,bShort:P};};p.prototype._handleButton1=function(E){if(this._iMode!=1){this._setIsSecondHeaderButtonAction(E);this._showMonthPicker();}else{this._hideMonthPicker();}};p.prototype._handleButton2=function(E){if(this._iMode<=1){this._setIsSecondHeaderButtonAction(E);this._showYearPicker();}else{this._hideYearPicker();this._showYearRangePicker();}};p.prototype._selectMonth=function(){var F=new d(this._getFocusedDate(),this.getPrimaryCalendarType()),i=this._getMonthPicker(),E=i._focusedMonth||i._focusedMonth===0?i._focusedMonth:i.getMonth(),S;if(!!i._iYear){S=new d(i._iYear,E-1,1);}else{S=new d(this._getFocusedDate()._oUDate.getFullYear(),E-1,1);}if(this._bActionTriggeredFromSecondHeader&&S.getYear()>=a._minDate().getYear()){F.setYear(S.getYear());F.setMonth(S.getMonth());E=F.getMonth();}else if(F.getYear()===a._maxDate().getYear()&&E===11){E-=1;F.setMonth(E);}else{F.setMonth(E);}if(E!=F.getMonth()){F.setDate(0);}this._focusDate(F,true);this._hideMonthPicker();};p.prototype._getSucessorsPickerPopup=function(){return this.getPickerPopup&&this.getPickerPopup();};p.prototype._selectYear=function(){var F=new d(this._getFocusedDate(),this.getPrimaryCalendarType()),i=F.getMonth(),E=this._getYearPicker(),G=d.fromLocalJSDate(E.getDate(),this.getPrimaryCalendarType());if(!this._bActionTriggeredFromSecondHeader){G.setMonth(i,F.getDate());}else{G.setYear(i===11?G.getYear()-1:G.getYear());G.setMonth(i,F.getDate());}F=G;this._focusDate(F,true);this._hideYearPicker();this._updateHeadersButtons();this._setHeaderText(this._getFocusedDate());};p.prototype._selectYearRange=function(){var i=this.getAggregation("yearRangePicker"),E=this.getAggregation("header"),F=i.getRangeSize(),P=this.getPrimaryCalendarType(),S=d.fromLocalJSDate(i.getDate(),P),G=new d(S.getYear()+F-1,0,1,P),I=this._getFocusedDate(),J,N;S.setMonth(0,1);I.setYear(S.getYear()+Math.floor(F/2));this._setFocusedDate(I);this._hideYearRangePicker();this._showYearPicker();J=this._oYearFormat.format(U.getInstance(S.toUTCJSDate(),S.getCalendarType()),true);N=this._oYearFormat.format(U.getInstance(G.toUTCJSDate(),G.getCalendarType()),true);E.setTextButton2(J+" - "+N);E._setTextButton4(J+" - "+N);};p.prototype._showYearRangePicker=function(){var i=this.getAggregation("yearRangePicker"),E=this._getYearPicker(),F=d.fromLocalJSDate(E.getFirstRenderedDate(),this.getPrimaryCalendarType());i.getDomRef()?i.$().css("display",""):this._renderPicker(i);this._showOverlay();i.setDate(F.toLocalJSDate());this._togglePrevNexYearPicker();this._iMode=3;this._updateHeadersButtons();};p.prototype._hideYearRangePicker=function(){this._iMode=0;this.getAggregation("yearRangePicker").$().css("display","none");this._hideOverlay();this._bActionTriggeredFromSecondHeader=false;};p.prototype._showOverlay=function(){this.$("contentOver").css("display","");};p.prototype._hideOverlay=function(){this.$("contentOver").css("display","none");};p.prototype._setColumns=function(i){this._iColumns=i;return this;};p.prototype._getColumns=function(){return this._iColumns;};p.prototype._updateMonthButtonVisibility=function(){var i=this._getActiveHeaderAggregation();if(this._bActionTriggeredFromSecondHeader){this._isTwoMonthsInOneColumn()?i.setVisibleButton1(!i.getVisibleButton1()):i._setVisibleButton3(!i._getVisibleButton3());}else{i.setVisibleButton1(false);}return this;};p.prototype._updateActiveHeaderYearButtonVisibility=function(){var i=this._getActiveHeaderAggregation();if(this._bActionTriggeredFromSecondHeader){this._isTwoMonthsInOneColumn()?i.setVisibleButton1(!i.getVisibleButton1()):i._setVisibleButton3(!i._getVisibleButton3());}else{i.setVisibleButton1(!i.getVisibleButton1());}return this;};p.prototype._updateHeadersButtonsHelper=function(i,E,F,G){var I=this.getAggregation("header"),S=this.getAggregation("secondMonthHeader");I.setVisibleButton1(i);I.setVisibleButton2(E);I._setVisibleButton3(F);I._setVisibleButton4(G);if(S.getVisible()){S.setVisibleButton1(i);S.setVisibleButton2(E);S._setVisibleButton3(F);S._setVisibleButton4(G);}};p.prototype._updateHeadersButtons=function(){var S=this.getAggregation("secondMonthHeader");if(this._isTwoMonthsInOneColumn()){S.setVisible(true);if(this._iMode===2){this._updateHeadersButtonsHelper(false,true,false,false);}else if(this._iMode===3){this._updateHeadersButtonsHelper(false,false,false,false);}else{this._updateHeadersButtonsHelper(true,true,false,false);}}else if(this._isTwoMonthsInTwoColumns()){S.setVisible(false);if(this._iMode===2){this._bActionTriggeredFromSecondHeader?this._updateHeadersButtonsHelper(true,true,false,true):this._updateHeadersButtonsHelper(false,true,true,true);}else if(this._iMode===3){this._updateHeadersButtonsHelper(false,false,false,false);}else if(this._iMode===1){this._bActionTriggeredFromSecondHeader?this._updateHeadersButtonsHelper(true,true,false,true):this._updateHeadersButtonsHelper(false,true,true,true);}else{this._updateHeadersButtonsHelper(true,true,true,true);}}else{S.setVisible(false);if(this._iMode===2){this._updateHeadersButtonsHelper(false,true,false,false);}else if(this._iMode===3){this._updateHeadersButtonsHelper(false,false,false,false);}else{this._updateHeadersButtonsHelper(true,true,false,false);}}if(this._getSucessorsPickerPopup()){this.getAggregation("header").setVisibleButton2(false);}};p.prototype._setPrimaryHeaderMonthButtonText=function(){var i=this.getAggregation("header");if(this._isTwoMonthsInOneColumn()||this._isTwoMonthsInTwoColumns()){i.setTextButton1(this._sFirstMonthName);}};p.prototype._toggleTwoMonthsInTwoColumnsCSS=function(){if(this._isTwoMonthsInTwoColumns()){if(o.getConfiguration().getLocale().getLanguage().toLowerCase()==="ja"||o.getConfiguration().getLocale().getLanguage().toLowerCase()==="zh"){this.addStyleClass("sapUiCalTwoMonthsTwoColumnsJaZh");this.removeStyleClass("sapUiCalTwoMonthsTwoColumns");}else{this.addStyleClass("sapUiCalTwoMonthsTwoColumns");this.removeStyleClass("sapUiCalTwoMonthsTwoColumnsJaZh");}}else{this.removeStyleClass("sapUiCalTwoMonthsTwoColumnsJaZh");this.removeStyleClass("sapUiCalTwoMonthsTwoColumns");}};p.prototype._isTwoMonthsInOneColumn=function(){var i=v.call(this);return this._getColumns()===1&&i===2;};p.prototype._isTwoMonthsInTwoColumns=function(){var i=v.call(this);return this._getColumns()===2&&i===2;};p.prototype._updateHeadersYearPrimaryText=function(F,S){var i=this._getYearPicker(),E=this.getAggregation("header"),G=this.getAggregation("secondMonthHeader"),I=F,J=F,N=S||F,P=this.getPrimaryCalendarType();if(this._iMode===2&&i&&i.getDomRef()){var O=i._oItemNavigation.getItemDomRefs(),Q=O[0].getAttribute("data-sap-year-start"),T=O[O.length-1].getAttribute("data-sap-year-start"),V=d.fromLocalJSDate(i._oFormatYyyymmdd.parse(Q),P),W=d.fromLocalJSDate(i._oFormatYyyymmdd.parse(T),P),X,Z;V.setDate(1);W.setDate(1);X=this._oYearFormat.format(U.getInstance(V.toUTCJSDate(),V.getCalendarType()),true);Z=this._oYearFormat.format(U.getInstance(W.toUTCJSDate(),W.getCalendarType()),true);if(this._bActionTriggeredFromSecondHeader){N=X+" - "+Z;}else{J=X+" - "+Z;}}E._setTextButton4(N);E._setAriaLabelButton4(N);G.setTextButton2(N);G.setAriaLabelButton2(N);E.setTextButton2(J);E.setAriaLabelButton2(I);};p.prototype._updateHeadersYearAdditionalText=function(i){var E=this.getAggregation("header"),S=this.getAggregation("secondMonthHeader"),F=E.getAriaLabelButton2();if(i){F+=", "+i;E.setAriaLabelButton2(F);}E.setAdditionalTextButton2(i);E._setAdditionalTextButton4(i);S.setAdditionalTextButton2(i);};p.prototype._adjustYearRangeDisplay=function(){var i=this.getAggregation("yearRangePicker");if(!this._getSucessorsPickerPopup()){switch(this.getPrimaryCalendarType()){case n.Japanese:i.setColumns(1);i.setYears(4);break;case n.Gregorian:i.setColumns(3);i.setYears(9);break;default:i.setColumns(2);i.setYears(8);}}};function _(){var S=this.getSelectedDates();var i=this.getPrimaryCalendarType();if(S&&S[0]&&S[0].getStartDate()){this._oFocusedDate=d.fromLocalJSDate(S[0].getStartDate(),i);}else{this._oFocusedDate=d.fromLocalJSDate(new Date(),i);}if(this._oFocusedDate.isBefore(this._oMinDate)){this._oFocusedDate=new d(this._oMinDate,i);}else if(this._oFocusedDate.isAfter(this._oMaxDate)){this._oFocusedDate=new d(this._oMaxDate,i);}}function r(E){var W=E.size.width;if(W<=0){return;}var O=this._iSize;if(W<this._iBreakPointTablet){this._iSize=0;}else if(W<this._iBreakPointDesktop){this._iSize=1;}else if(W<this._iBreakPointLargeDesktop){this._iSize=2;}else{this._iSize=3;}var F=v.call(this);if(O!=this._iSize||this._bInitMonth){switch(this._iSize){case 1:this._setColumns(2);break;case 2:this._setColumns(3);break;case 3:this._setColumns(4);break;default:this._setColumns(1);break;}if(F<this._getColumns()){this._setColumns(F);}if(this._getColumns()>2&&F>this._getColumns()){var G=this._getColumns();var I=0.0;var J=this._getColumns();while(G>=2){var N=F%G;if(N==0){J=G;break;}else{var P=N/G;if(P>I){I=P;J=G;}}G--;}this._setColumns(J);}var Q;var S=this.getAggregation("month");if(this._getColumns()>1){Q=100/this._getColumns()+"%";this.$("content").removeClass("sapUiCalContentSingle");}else{Q="100%";this.$("content").addClass("sapUiCalContentSingle");}for(var i=0;i<S.length;i++){var T=S[i];T.setWidth(Q);}}this._updateHeadersButtons();this._setPrimaryHeaderMonthButtonText();this._toggleTwoMonthsInTwoColumnsCSS();}function s(i){var F=new d(i,this.getPrimaryCalendarType());F.setDate(1);var E=v.call(this);if(E<=12){var G=i.getMonth();if(12%E>0&&G+E>11){G=12-E;}F.setMonth(G);}return F;}function t(){var i,E,F;if(!this._bNamesLengthChecked){this._showMonthPicker(true);this._hideMonthPicker(true);i=this._getMonthPicker();this._bLongMonth=i._bLongMonth;this._bNamesLengthChecked=true;if(!this._bLongMonth){E=this.getAggregation("month");F;if(E.length>1){F=d.fromLocalJSDate(E[0].getDate(),this.getPrimaryCalendarType());}else{F=this._getFocusedDate();}this._setHeaderText(F);this._updateHeadersButtons();this._setPrimaryHeaderMonthButtonText();this._toggleTwoMonthsInTwoColumnsCSS();}}else if(v.call(this)>1){this._focusDate(this._getFocusedDate(),true,true);}}function u(i,S){var E,F;if(!i){return;}E=d.fromLocalJSDate(i,this.getPrimaryCalendarType());F=E.getYear();a._checkYearInValidRange(F);if(a._isOutside(E,this._oMinDate,this._oMaxDate)){throw new Error("Date must not be in valid range (minDate and maxDate); "+this);}this._setFocusedDate(E);if(this.getDomRef()&&this._iMode==0){this._renderMonth(S,false,true);}}function v(){if(e.system.phone){return 1;}else{return this.getMonths();}}function w(E){this.fireEvent("_renderMonth",{days:E.getParameter("days")});}function x(E){if(v.call(this)>1){var F=this.getAggregation("month");for(var i=0;i<F.length;i++){var G=F[i];if(G.getId()!=E.oSource.getId()){G._updateSelection();}}}this._oSelectedMonth=E.oSource;this.fireSelect();}function y(E){var F,G,i;if(v.call(this)>1){F=this.getAggregation("month");for(i=0;i<F.length;i++){G=F[i];if(G.getId()!=E.oSource.getId()){G._bindMousemove();}}}}function z(E){var F,G,i;if(v.call(this)>1){F=this.getAggregation("month");for(i=0;i<F.length;i++){G=F[i];if(G.getId()!=E.oSource.getId()){G._unbindMousemove();}}}}function A(E){var O=E.getParameter("offset");if(O>0){this._handleNext(E);}if(O<0){this._handlePrevious(E);}}function B(){this._updateHeadersYearPrimaryText(this._getYearString());}return p;});
