/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/test/matchers/Matcher'],function(M){"use strict";return M.extend("sap.ui.test.matchers.BindingPath",{metadata:{publicMethods:["isMatching"],properties:{path:{type:"string"},modelName:{type:"string"},propertyPath:{type:"string"}}},isMatching:function(c){var m=this.getModelName()||undefined;var p=this.getPropertyPath();var C=this.getPath();if(!C&&!p){this._oLogger.debug("Matcher requires context path or property path but none is defined! No controls will be matched");return false;}var b=true;var P=true;var o=c.mObjectBindingInfos&&c.mObjectBindingInfos[m];var B=c.getBindingContext(m);if(C){if(o){var s=_(C,m);b=o.path===s;if(b){this._oLogger.debug("Control '"+c+"' has object binding with the expected context path '"+s+"' for model '"+m+"'");}else{this._oLogger.debug("Control '"+c+"' has object binding with context path '"+o.path+"' for model '"+m+"' but should have context path '"+s+"'");}}else{b=!!B&&B.getPath()===C;if(b){this._oLogger.debug("Control '"+c+"' has binding context with the expected path '"+C+"' for model '"+m+"'");}else if(B){this._oLogger.debug("Control '"+c+"' has binding context with path '"+B.getPath()+"' for model '"+m+"' but should have context path '"+C+"'");}else{this._oLogger.debug("Control '"+c+"' does not have a binding context for model '"+m+"' but should have a binding context with path '"+C+"'");}}}if(p){var a=_(p,m,B);var A=[];var d=Object.keys(c.mBindingInfos).filter(function(e){var f=c.mBindingInfos[e];var g=f.parts?f.parts:[f];var h=g.filter(function(i){var j=i.path===a;var k=o||i.model===m;if(!j&&k){A.push(i.path);}return j&&k;});return!!h.length;});P=!!d.length;if(P){this._oLogger.debug("Control '"+c+"' has the expected binding property path '"+p+"' for model '"+m+"'");}else if(A.length){this._oLogger.debug("Control '"+c+"' has binding property paths ['"+A.join("', '")+"'] for model '"+m+"' but should have binding property path '"+a+"'");}else{this._oLogger.debug("Control '"+c+"' has no binding property paths for model '"+m+"' but should have binding property path '"+a+"'");}}return b&&P;}});function _(p,w,W){var P="/";var f=p;if(w||W){if(p.charAt(0)===P){f=p.substring(1);}}else if(p.charAt(0)!==P){f=P+p;}return f;}});
