/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/m/BadgeCustomData','sap/base/Log'],function(B,L){"use strict";var I="sapMBadge";var a={topLeft:"sapMBadgeTopLeft",topRight:"sapMBadgeTopRight",inline:"sapMBadgeInline"};var b=function(){if(typeof this.isA!=="function"||!this.isA("sap.ui.core.Control")){L.error("Badge enablement could be applied over controls only");return;}this.initBadgeEnablement=function(C){this._oBadgeConfig=C;this.addEventDelegate({onAfterRendering:c},this);};function _(C,o){if(C.suffix){return o.$(C.suffix);}if(C.selector){return o.$().find(C.selector).first();}}function c(){this._isBadgeAttached=false;if(!this.getBadgeCustomData()||!i(this.getBadgeCustomData().getValue())){return false;}this._oBadgeContainer=this._oBadgeConfig&&this._oBadgeConfig.selector?_(this._oBadgeConfig.selector,this):this.$();var e=jQuery('<div></div>').addClass(I+"Indicator");e.attr("id",this.getId()+I);e.attr("data-badge",this._oBadgeCustomData.getValue());e.appendTo(this._oBadgeContainer);this._oBadgeContainer.addClass(I);this._isBadgeAttached=true;if(!this._oBadgeConfig){return this;}if(this._oBadgeConfig.position){this._oBadgeContainer.addClass(a[this._oBadgeConfig.position]);}if(this._oBadgeConfig.accentColor){this._oBadgeContainer.addClass(I+this._oBadgeConfig.accentColor);}return this;}function d(){this._oBadgeContainer.removeClass(I);jQuery("#"+this.getId()+I).remove();this._isBadgeAttached=false;return this;}this.updateBadge=function(v){if(i(v)){if(this._isBadgeAttached){jQuery('#'+this.getId()+I).attr("data-badge",v);}else{c.call(this);}}else if(this._isBadgeAttached){d.call(this);}};function i(v){return v!==undefined&&v!=="undefined"&&v!=="";}this.addCustomData=function(C){if(C.isA("sap.m.BadgeCustomData")){this.removeAggregation("customData",this._oBadgeCustomData,true);this._oBadgeCustomData=C;this.addAggregation("customData",C,true);return this.updateBadge(C.getValue());}return this.addAggregation("customData",C);};this.insertCustomData=function(C){if(C.isA("sap.m.BadgeCustomData")){this.updateBadge(C.getValue());this.removeAggregation("customData",this._oBadgeCustomData,true);this._oBadgeCustomData=C;return this.addAggregation("customData",C,true);}return this.insertAggregation("customData",C);};this.getBadgeCustomData=function(){var o=this.getCustomData().filter(function(e){return e instanceof B;});return o.length?o[0]:undefined;};this.removeBadgeCustomData=function(){var o;o=this._oBadgeCustomData;this._oBadgeCustomData=null;this.updateBadge();return this.removeAggregation("customData",o,true);};};return b;});
